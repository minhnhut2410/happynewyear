<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thiệp Tết 2026</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Be+Vietnam+Pro:wght@400;600;700;900&display=swap"
    rel="stylesheet" />
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    body{height:100vh;display:flex;align-items:center;justify-content:center;background:#1a0a00 url("background-tet-2023-20-1.jpg");background-image:url("background-tet-2023-20-1.jpg");background-size:cover;background-position:center;font-family:'Be Vietnam Pro',sans-serif;overflow:hidden}
    #fw{position:fixed;inset:0;z-index:1;pointer-events:none}
    :root{--pw:min(260px,44vw);--ph:min(400px,68vw)}
    .book{position:relative;z-index:5;display:flex;align-items:stretch;height:var(--ph)}
    .left-page{width:var(--pw);height:var(--ph);background:linear-gradient(150deg,#c8101e 0%,#8b0a12 100%);border:3px solid #ffd700;border-right:none;border-radius:14px 0 0 14px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding-bottom:26px;flex-shrink:0;overflow:hidden;box-shadow:-6px 10px 40px rgba(0,0,0,.5)}
    .spine{width:0;height:var(--ph);background:linear-gradient(to bottom,#ffd700,#9a6e00,#ffd700);box-shadow:0 0 10px rgba(255,215,0,.5);flex-shrink:0;overflow:hidden;transition:width .2s .7s ease-in-out}
    .book.open .spine{width:7px}
    .right-page{width:0;height:var(--ph);overflow:hidden;flex-shrink:0;transition:width .6s .8s cubic-bezier(.25,.46,.45,.94)}
    .book.open .right-page{width:var(--pw)}
    .right-inner{width:var(--pw);height:var(--ph);background:#fdf3e3;border:3px solid #d4af37;border-left:none;border-radius:0 14px 14px 0;padding:22px 18px 16px;display:flex;flex-direction:column;color:#3a2010;box-shadow:6px 10px 40px rgba(0,0,0,.5)}
    .r-title{color:#8b0a12;font-weight:900;font-size:17px;line-height:1.3;margin-bottom:4px}
    .r-sub{font-family:'Dancing Script',cursive;font-size:19px;color:#b08020;margin-bottom:14px}
    .r-body{line-height:1.85;font-size:13px;border-top:1px solid #d4af37;padding-top:14px;flex:1}
    .r-sig{font-weight:700;font-size:13px;color:#8b0a12;text-align:right;padding-top:10px}
    .cover-scene{position:absolute;left:0;top:0;width:var(--pw);height:var(--ph);perspective:1400px;z-index:10}
    .cover{width:100%;height:100%;position:relative;transform-style:preserve-3d;transform-origin:right center;transition:transform 1.4s cubic-bezier(.37,0,.63,1);cursor:pointer}
    .book.open .cover{transform:rotateY(-180deg)}
    .cover-front,.cover-back{position:absolute;inset:0;backface-visibility:hidden}
    .cover-front{background:linear-gradient(150deg,#d01020 0%,#8b0a12 100%);border:3px solid #ffd700;border-right:none;border-radius:14px 0 0 14px;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding-bottom:26px;overflow:hidden;box-shadow:0 8px 40px rgba(0,0,0,.8)}
    .cover-back{transform:rotateY(180deg);background:transparent}
    .hint-bar{position:absolute;top:16px;left:0;right:0;display:flex;justify-content:center}
    .hint{font-size:11px;color:rgba(255,255,255,.65);animation:blink 2s infinite;letter-spacing:1px}
    @keyframes blink{0%,100%{opacity:.3}50%{opacity:1}}
    .page-content{display:flex;flex-direction:column;align-items:center;width:100%;padding:0 12px}
    .plum-svg{width:90%}
    .t-xuan{font-family:'Dancing Script',cursive;font-size:44px;color:#fff;line-height:1.1;margin-top:8px}
    .t-zodiac{font-size:12px;letter-spacing:5px;color:#ffe066;margin:6px 0 3px}
    .t-year{font-weight:900;font-size:58px;color:#fff;line-height:1}

    /* Floating blessing text */
    .float-text {
      position: fixed;
      pointer-events: none;
      z-index: 3;
      font-family: 'Be Vietnam Pro', sans-serif;
      font-weight: 900;
      font-size: 17px;
      color: #ffe066;
      text-shadow: 0 0 8px rgba(255,200,0,.9), 0 0 20px rgba(255,100,0,.6), 1px 1px 3px rgba(0,0,0,.9);
      letter-spacing: 1px;
      white-space: nowrap;
      animation: floatUp 4s ease-out forwards;
    }
    @keyframes floatUp {
      0%   { opacity: 0; transform: translateY(0px); }
      15%  { opacity: 1; }
      80%  { opacity: 1; }
      100% { opacity: 0; transform: translateY(-90px); }
    }
  </style>
</head>
<body>
  <audio id="bgm"><source src="tet.mp3" type="audio/mpeg"></audio>
  <canvas id="fw"></canvas>

  <div class="book" id="book">
    <div class="left-page">
      <div class="page-content">
        <svg class="plum-svg" viewBox="0 0 240 210" fill="none">
          <path d="M20 205 Q50 165 85 130 Q115 100 150 72 Q175 52 205 35" stroke="#3d1400" stroke-width="5.5" stroke-linecap="round"/>
          <path d="M85 130 Q65 112 45 100" stroke="#3d1400" stroke-width="4" stroke-linecap="round"/>
          <path d="M120 103 Q102 85 88 74" stroke="#3d1400" stroke-width="3.5" stroke-linecap="round"/>
          <path d="M165 68 Q178 52 190 42" stroke="#3d1400" stroke-width="3" stroke-linecap="round"/>
          <path d="M147 74 Q155 58 162 50" stroke="#3d1400" stroke-width="2.5" stroke-linecap="round"/>
          <g transform="translate(205,33)"><circle cx="0" cy="-10" r="8.5" fill="#ffb3c1"/><circle cx="9.6" cy="-3" r="8.5" fill="#ff8fab"/><circle cx="5.9" cy="8.1" r="8.5" fill="#ffb3c1"/><circle cx="-5.9" cy="8.1" r="8.5" fill="#ff8fab"/><circle cx="-9.6" cy="-3" r="8.5" fill="#ffccd5"/><circle cx="0" cy="0" r="5" fill="#ffe066"/><circle cx="0" cy="0" r="2.2" fill="#fff9"/></g>
          <g transform="translate(192,40)"><circle cx="0" cy="-8" r="7" fill="#ffccd5"/><circle cx="7.9" cy="-2.5" r="7" fill="#ffb3c1"/><circle cx="4.9" cy="6.7" r="7" fill="#ffccd5"/><circle cx="-4.9" cy="6.7" r="7" fill="#ff8fab"/><circle cx="-7.9" cy="-2.5" r="7" fill="#ffb3c1"/><circle cx="0" cy="0" r="4" fill="#ffe066"/></g>
          <g transform="translate(163,48)"><circle cx="0" cy="-7" r="6" fill="#ffb3c1"/><circle cx="6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="4.1" cy="5.7" r="6" fill="#ffb3c1"/><circle cx="-4.1" cy="5.7" r="6" fill="#ffccd5"/><circle cx="-6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="0" cy="0" r="3.5" fill="#ffe066"/></g>
          <g transform="translate(87,72)"><circle cx="0" cy="-7.5" r="6.5" fill="#ffccd5"/><circle cx="7.1" cy="-2.3" r="6.5" fill="#ffb3c1"/><circle cx="4.4" cy="6.1" r="6.5" fill="#ffccd5"/><circle cx="-4.4" cy="6.1" r="6.5" fill="#ff8fab"/><circle cx="-7.1" cy="-2.3" r="6.5" fill="#ffb3c1"/><circle cx="0" cy="0" r="3.8" fill="#ffe066"/></g>
          <g transform="translate(44,98)"><circle cx="0" cy="-7" r="6" fill="#ffb3c1"/><circle cx="6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="4.1" cy="5.7" r="6" fill="#ffb3c1"/><circle cx="-4.1" cy="5.7" r="6" fill="#ffccd5"/><circle cx="-6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="0" cy="0" r="3.5" fill="#ffe066"/></g>
          <g transform="translate(120,101)"><circle cx="0" cy="-6" r="5.5" fill="#ffccd5"/><circle cx="5.7" cy="-1.9" r="5.5" fill="#ffb3c1"/><circle cx="3.5" cy="4.8" r="5.5" fill="#ffccd5"/><circle cx="-3.5" cy="4.8" r="5.5" fill="#ff8fab"/><circle cx="-5.7" cy="-1.9" r="5.5" fill="#ffccd5"/><circle cx="0" cy="0" r="3" fill="#ffe066"/></g>
          <ellipse cx="60" cy="106" rx="3.5" ry="6" fill="#ff8fab" transform="rotate(-25,60,106)"/>
          <ellipse cx="103" cy="88" rx="3" ry="5" fill="#ffb3c1" transform="rotate(15,103,88)"/>
          <ellipse cx="175" cy="58" rx="2.5" ry="4.5" fill="#ffccd5" transform="rotate(-10,175,58)"/>
          <ellipse cx="148" cy="76" rx="2.5" ry="4" fill="#ff8fab" transform="rotate(20,148,76)"/>
          <circle cx="72" cy="92" r="1.5" fill="#ffe066" opacity="0.7"/>
          <circle cx="135" cy="85" r="1.2" fill="#ffe066" opacity="0.6"/>
        </svg>
        <div class="t-xuan">Xuân</div>
        <div class="t-zodiac">✦ Bính Ngọ ✦</div>
        <div class="t-year">2026</div>
      </div>
    </div>
    <div class="spine"></div>
    <div class="right-page">
      <div class="right-inner">
        <div class="r-title">CHÚC MỪNG NĂM MỚI</div>
        <div class="r-sub">Happy New Year 2026</div>
        <div class="r-body">Sang năm 2026, chúc chị năm mới vui vẻ, sức khỏe dồi dào, công việc hanh thông, may mắn ngập tràn, hạnh phúc đong đầy<br><br>Cầu chúc ngàn điều tốt đẹp nhất luôn đến với bạn và gia đình bạn trong năm mới Bính Ngọ.<br><br>!!!!!MÃ ĐÁO THÀNH CÔNG!!!!!</div>
        <div class="r-sig">— 4aesiunhan</div>
      </div>
    </div>
    <div class="cover-scene">
      <div class="cover" id="cover">
        <div class="cover-front" onclick="toggleCard()">
          <div class="hint-bar"><div class="hint">Nhấn để mở thiệp ✨</div></div>
          <div class="page-content">
            <svg class="plum-svg" viewBox="0 0 240 210" fill="none">
              <path d="M20 205 Q50 165 85 130 Q115 100 150 72 Q175 52 205 35" stroke="#3d1400" stroke-width="5.5" stroke-linecap="round"/>
              <path d="M85 130 Q65 112 45 100" stroke="#3d1400" stroke-width="4" stroke-linecap="round"/>
              <path d="M120 103 Q102 85 88 74" stroke="#3d1400" stroke-width="3.5" stroke-linecap="round"/>
              <path d="M165 68 Q178 52 190 42" stroke="#3d1400" stroke-width="3" stroke-linecap="round"/>
              <path d="M147 74 Q155 58 162 50" stroke="#3d1400" stroke-width="2.5" stroke-linecap="round"/>
              <g transform="translate(205,33)"><circle cx="0" cy="-10" r="8.5" fill="#ffb3c1"/><circle cx="9.6" cy="-3" r="8.5" fill="#ff8fab"/><circle cx="5.9" cy="8.1" r="8.5" fill="#ffb3c1"/><circle cx="-5.9" cy="8.1" r="8.5" fill="#ff8fab"/><circle cx="-9.6" cy="-3" r="8.5" fill="#ffccd5"/><circle cx="0" cy="0" r="5" fill="#ffe066"/><circle cx="0" cy="0" r="2.2" fill="#fff9"/></g>
              <g transform="translate(192,40)"><circle cx="0" cy="-8" r="7" fill="#ffccd5"/><circle cx="7.9" cy="-2.5" r="7" fill="#ffb3c1"/><circle cx="4.9" cy="6.7" r="7" fill="#ffccd5"/><circle cx="-4.9" cy="6.7" r="7" fill="#ff8fab"/><circle cx="-7.9" cy="-2.5" r="7" fill="#ffb3c1"/><circle cx="0" cy="0" r="4" fill="#ffe066"/></g>
              <g transform="translate(163,48)"><circle cx="0" cy="-7" r="6" fill="#ffb3c1"/><circle cx="6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="4.1" cy="5.7" r="6" fill="#ffb3c1"/><circle cx="-4.1" cy="5.7" r="6" fill="#ffccd5"/><circle cx="-6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="0" cy="0" r="3.5" fill="#ffe066"/></g>
              <g transform="translate(87,72)"><circle cx="0" cy="-7.5" r="6.5" fill="#ffccd5"/><circle cx="7.1" cy="-2.3" r="6.5" fill="#ffb3c1"/><circle cx="4.4" cy="6.1" r="6.5" fill="#ffccd5"/><circle cx="-4.4" cy="6.1" r="6.5" fill="#ff8fab"/><circle cx="-7.1" cy="-2.3" r="6.5" fill="#ffb3c1"/><circle cx="0" cy="0" r="3.8" fill="#ffe066"/></g>
              <g transform="translate(44,98)"><circle cx="0" cy="-7" r="6" fill="#ffb3c1"/><circle cx="6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="4.1" cy="5.7" r="6" fill="#ffb3c1"/><circle cx="-4.1" cy="5.7" r="6" fill="#ffccd5"/><circle cx="-6.6" cy="-2.2" r="6" fill="#ff8fab"/><circle cx="0" cy="0" r="3.5" fill="#ffe066"/></g>
              <g transform="translate(120,101)"><circle cx="0" cy="-6" r="5.5" fill="#ffccd5"/><circle cx="5.7" cy="-1.9" r="5.5" fill="#ffb3c1"/><circle cx="3.5" cy="4.8" r="5.5" fill="#ffccd5"/><circle cx="-3.5" cy="4.8" r="5.5" fill="#ff8fab"/><circle cx="-5.7" cy="-1.9" r="5.5" fill="#ffccd5"/><circle cx="0" cy="0" r="3" fill="#ffe066"/></g>
              <ellipse cx="60" cy="106" rx="3.5" ry="6" fill="#ff8fab" transform="rotate(-25,60,106)"/>
              <ellipse cx="103" cy="88" rx="3" ry="5" fill="#ffb3c1" transform="rotate(15,103,88)"/>
              <ellipse cx="175" cy="58" rx="2.5" ry="4.5" fill="#ffccd5" transform="rotate(-10,175,58)"/>
              <ellipse cx="148" cy="76" rx="2.5" ry="4" fill="#ff8fab" transform="rotate(20,148,76)"/>
              <circle cx="72" cy="92" r="1.5" fill="#ffe066" opacity="0.7"/>
              <circle cx="135" cy="85" r="1.2" fill="#ffe066" opacity="0.6"/>
            </svg>
            <div class="t-xuan">Xuân</div>
            <div class="t-zodiac">✦ Bính Ngọ ✦</div>
            <div class="t-year">2026</div>
          </div>
        </div>
        <div class="cover-back"></div>
      </div>
    </div>
  </div>

  <script>
    const music = document.getElementById("bgm");
    function toggleCard() {
      document.getElementById('book').classList.toggle('open');
      music.play();
    }

    // ===== FIREWORKS =====
    const canvas = document.getElementById('fw');
    const ctx = canvas.getContext('2d');
    let particles = [], rockets = [];

    function resize() { canvas.width = innerWidth; canvas.height = innerHeight; }
    window.addEventListener('resize', resize);
    resize();

    function launchRocket() {
      const x = canvas.width * (0.1 + Math.random() * 0.8);
      const targetY = canvas.height * (0.1 + Math.random() * 0.35);
      const hue = Math.random() * 360;
      const speed = 8 + Math.random() * 6;
      rockets.push({ x, y: canvas.height + 10, vx: (x - canvas.width/2)*0.005, vy: -speed, targetY, hue, trail: [] });
    }

    function burst(x, y, hue) {
      const count = 140 + Math.floor(Math.random() * 60);
      const style = Math.floor(Math.random() * 4);
      for (let i = 0; i < count; i++) {
        let angle, speed;
        if (style===0) { angle=(i/count)*Math.PI*2; speed=5+Math.random()*3; }
        else if (style===1) { angle=(i/count)*Math.PI*2; speed=(i%5===0)?9+Math.random()*3:3+Math.random()*4; }
        else if (style===2) { angle=Math.random()*Math.PI*2; speed=2+Math.random()*9; }
        else { angle=(i/count)*Math.PI*2; speed=i%2===0?4+Math.random():7+Math.random(); }
        const ph = Math.random()>0.8 ? 50 : hue;
        particles.push({ x, y, vx:Math.cos(angle)*speed, vy:Math.sin(angle)*speed,
          life:90+Math.random()*60, maxLife:90+Math.random()*60,
          size:1.5+Math.random()*2, hue:ph, sparkle:Math.random()>0.6,
          gravity:0.06+Math.random()*0.04 });
      }
      for (let i = 0; i < 30; i++) {
        const angle = Math.random()*Math.PI*2, s2 = Math.random()*3;
        particles.push({ x, y, vx:Math.cos(angle)*s2, vy:Math.sin(angle)*s2-1,
          life:60+Math.random()*40, maxLife:100, size:0.8+Math.random(),
          hue:50, sparkle:false, gravity:0.03 });
      }
    }

    function loop() {
      ctx.clearRect(0,0,canvas.width,canvas.height);


      for (let i = rockets.length-1; i >= 0; i--) {
        const r = rockets[i];
        r.trail.push({x:r.x, y:r.y});
        if (r.trail.length > 12) r.trail.shift();
        r.x += r.vx; r.y += r.vy; r.vy += 0.12;
        for (let t = 0; t < r.trail.length; t++) {
          ctx.globalAlpha = t/r.trail.length*0.7;
          ctx.beginPath(); ctx.fillStyle=`hsl(${r.hue},100%,70%)`;
          ctx.arc(r.trail[t].x, r.trail[t].y, 1.5-t*0.1, 0, Math.PI*2); ctx.fill();
        }
        ctx.globalAlpha = 1;
        ctx.beginPath(); ctx.fillStyle='#fff'; ctx.arc(r.x,r.y,2.5,0,Math.PI*2); ctx.fill();
        if (r.y <= r.targetY || r.vy >= 0) {
          burst(r.x, r.y, r.hue);
          rockets.splice(i, 1);
        }
      }

      for (let i = particles.length-1; i >= 0; i--) {
        const p = particles[i];
        p.x+=p.vx; p.y+=p.vy; p.vy+=p.gravity; p.vx*=0.98; p.life--;
        const alpha = Math.pow(p.life/p.maxLife, 1.4);
        ctx.globalAlpha = alpha;
        const grd = ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.size*2.5);
        grd.addColorStop(0,`hsl(${p.hue},100%,90%)`);
        grd.addColorStop(0.4,`hsl(${p.hue},100%,60%)`);
        grd.addColorStop(1,'transparent');
        ctx.beginPath(); ctx.fillStyle=grd; ctx.arc(p.x,p.y,p.size*2.5,0,Math.PI*2); ctx.fill();
        ctx.beginPath(); ctx.fillStyle='#fff'; ctx.arc(p.x,p.y,p.size*0.5,0,Math.PI*2); ctx.fill();
        if (p.sparkle && p.life%3===0) {
          ctx.globalAlpha=alpha*0.5; ctx.strokeStyle=`hsl(${p.hue},100%,80%)`; ctx.lineWidth=0.8;
          ctx.beginPath(); ctx.moveTo(p.x,p.y); ctx.lineTo(p.x-p.vx*3,p.y-p.vy*3); ctx.stroke();
        }
        if (p.life<=0) particles.splice(i,1);
      }
      ctx.globalAlpha = 1;

      if (Math.random()<0.025) launchRocket();
      if (Math.random()<0.008) {
        setTimeout(launchRocket, 200+Math.random()*300);
        setTimeout(launchRocket, 500+Math.random()*400);
      }
      requestAnimationFrame(loop);
    }
    loop();

    // ===== FLOATING BLESSING TEXTS =====
    const blessings = [
      'CHÚC MỪNG NĂM MỚI','CHÚC CHO CHỊ VY','TÀI LỘC DỒI DÀO',
      'VẠN SỰ NHƯ Ý','SỨC KHỎE DỒI DÀO',
      ,'AN KHANG THỊNH VƯỢNG',
      'BÌNH AN MAY MẮN','CẢM ƠN CHỊ', 'VÌ ĐÃ ĐỒNG HÀNH', 'CÙNG TỤI EM <3'
    ];

    function getCardBounds() {
      const book = document.getElementById('book');
      const isOpen = book.classList.contains('open');
      const pw = Math.min(260, window.innerWidth * 0.44);
      const ph = Math.min(400, window.innerWidth * 0.68);
      const totalW = isOpen ? pw*2+7 : pw;
      const cx = window.innerWidth/2, cy = window.innerHeight/2;
      return { left:cx-totalW/2, right:cx+totalW/2, top:cy-ph/2, bottom:cy+ph/2, ph };
    }

    let blessingIndex = 0;

    function spawnFloatingText() {
      const bounds = getCardBounds();
      const side = Math.random() < 0.5 ? 'left' : 'right';
      let x;
      if (side === 'left') {
        const maxX = bounds.left - 20;
        if (maxX < 80) { spawnFloatingText(); return; }
        x = 20 + Math.random() * (maxX - 80);
      } else {
        const minX = bounds.right + 20;
        if (minX > window.innerWidth - 80) { spawnFloatingText(); return; }
        x = minX + Math.random() * (window.innerWidth - minX - 60);
      }
      const y = bounds.top + 20 + Math.random() * (bounds.ph - 40);

      const el = document.createElement('div');
      el.className = 'float-text';
      el.textContent = blessings[blessingIndex % blessings.length];
      blessingIndex++;
      el.style.left = x + 'px';
      el.style.top = y + 'px';
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 4000);
    }

    function scheduleNext() {
      spawnFloatingText();
      setTimeout(scheduleNext, 1800 + Math.random() * 2200);
    }
    setTimeout(scheduleNext, 1500);
  </script>
</body>
</html>
